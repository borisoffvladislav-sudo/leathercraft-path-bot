#!/usr/bin/env python3
"""
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π –º–æ–¥—É–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
"""

from database.models import Database

def test_new_database_structure():
    """–¢–µ—Å—Ç –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î"""
    print("üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π –º–æ–¥—É–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î...")
    
    # –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –æ—Å–Ω–æ–≤–Ω–æ–π –ë–î
    db = Database()
    
    # –¢–µ—Å—Ç–∏—Ä—É–µ–º –≤—Å–µ –º–æ–¥—É–ª–∏
    print("\n1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π...")
    test_user = db.characters.get_or_create_user(123456789, "test_user", "Test", "User")
    print(f"‚úÖ User ID: {test_user}")
    
    print("\n2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è –º–∞–≥–∞–∑–∏–Ω–∞...")
    categories = db.shop.get_all_categories()
    print(f"‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–∞–≥–∞–∑–∏–Ω–∞: {categories}")
    
    print("\n3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è...")
    inventory = db.inventory.get_player_inventory(1)  # –¢–µ—Å—Ç–æ–≤—ã–π ID
    print(f"‚úÖ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å: {len(inventory)} –ø—Ä–µ–¥–º–µ—Ç–æ–≤")
    
    print("\n4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è –æ–±—É—á–µ–Ω–∏—è...")
    tutorial_status = db.tutorial.get_tutorial_status(1)
    print(f"‚úÖ –°—Ç–∞—Ç—É—Å –æ–±—É—á–µ–Ω–∏—è: {tutorial_status.get('current_step', 'N/A')}")
    
    print("\n5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è –∑–∞–∫–∞–∑–æ–≤...")
    available_orders = db.orders.get_available_orders(1)
    print(f"‚úÖ –î–æ—Å—Ç—É–ø–Ω—ã–µ –∑–∞–∫–∞–∑—ã: {len(available_orders)}")
    
    print("\n6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏...")
    # –°—Ç–∞—Ä—ã–µ –º–µ—Ç–æ–¥—ã –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å
    active_player = db.get_active_player(123456789)
    print(f"‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: {active_player is not None}")
    
    print("\nüéâ –í—Å–µ –º–æ–¥—É–ª–∏ –ë–î —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!")
    print("üìä –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!")

if __name__ == "__main__":
    test_new_database_structure()
